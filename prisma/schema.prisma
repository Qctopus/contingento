generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ActionPlan {
  id                     String                 @id
  planId                 String                 @unique
  actionPlanByRisk       String
  implementationTimeline String
  resourceRequirements   String
  responsibleParties     String
  reviewUpdateSchedule   String
  testingAssessmentPlan  String
  BusinessContinuityPlan BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model ActionStep {
  id                     String                  @id
  strategyId             String
  stepId                 String
  phase                  String                  @default("immediate")
  estimatedMinutes       Int?                    @default(60)
  difficultyLevel        String?                 @default("medium")
  estimatedCost          String?
  dependsOnSteps         String?
  isOptional             Boolean                 @default(false)
  skipConditions         String?
  videoTutorialUrl       String?
  externalResourceUrl    String?
  sortOrder              Int                     @default(0)
  isActive               Boolean                 @default(true)
  createdAt              DateTime                @default(now())
  updatedAt              DateTime
  priority               String                  @default("medium")
  requiredSkills         Json?
  requiresExternal       Boolean                 @default(false)
  stepNumber             Int                     @default(0)
  tools                  Json?
  RiskMitigationStrategy RiskMitigationStrategy  @relation(fields: [strategyId], references: [id], onDelete: Cascade)
  ActionStepItemCost     ActionStepItemCost[]
  ActionStepTranslation  ActionStepTranslation[]

  @@unique([strategyId, stepId])
  @@index([difficultyLevel])
  @@index([isOptional])
  @@index([phase])
  @@index([strategyId])
}

model ActionStepItemCost {
  id               String     @id
  actionStepId     String
  itemId           String
  quantity         Int        @default(1)
  customNotes      String?
  countryOverrides String?
  displayOrder     Int        @default(0)
  createdAt        DateTime   @default(now())
  updatedAt        DateTime
  ActionStep       ActionStep @relation(fields: [actionStepId], references: [id], onDelete: Cascade)
  CostItem         CostItem   @relation(fields: [itemId], references: [itemId], onDelete: Cascade)

  @@unique([actionStepId, itemId])
  @@index([actionStepId])
  @@index([itemId])
}

model ActionStepTranslation {
  id                    String     @id
  actionStepId          String
  locale                String
  title                 String
  description           String?
  smeAction             String?
  timeframe             String?
  whyThisStepMatters    String?
  howToKnowItsDone      String?
  whatHappensIfSkipped  String?
  exampleOutput         String?
  freeAlternative       String?
  lowTechOption         String?
  commonMistakesForStep Json?
  createdAt             DateTime   @default(now())
  updatedAt             DateTime
  ActionStep            ActionStep @relation(fields: [actionStepId], references: [id], onDelete: Cascade)

  @@unique([actionStepId, locale])
  @@index([actionStepId])
  @@index([locale])
}

model AdminActionPlan {
  id                    String                  @id
  hazardId              String                  @unique
  resourcesNeeded       String
  immediateActions      String
  shortTermActions      String
  mediumTermActions     String
  longTermReduction     String
  businessTypeModifiers String?
  isActive              Boolean                 @default(true)
  createdAt             DateTime                @default(now())
  updatedAt             DateTime
  AdminHazardType       AdminHazardType         @relation(fields: [hazardId], references: [hazardId], onDelete: Cascade)
  AdminHazardActionPlan AdminHazardActionPlan[]
}

model AdminBusinessType {
  id                      String                    @id
  businessTypeId          String                    @unique
  name                    String
  localName               String
  category                String
  description             String?
  typicalOperatingHours   String?
  minimumStaff            String?
  minimumEquipment        String?
  minimumUtilities        String?
  minimumSpace            String?
  essentialFunctions      String?
  criticalSuppliers       String?
  exampleBusinessPurposes String?
  exampleProducts         String?
  exampleKeyPersonnel     String?
  exampleCustomerBase     String?
  dependencies            String?
  vulnerabilityMatrix     String?
  operationalThresholds   String?
  isActive                Boolean                   @default(true)
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime
  AdminBusinessTypeHazard AdminBusinessTypeHazard[]
  AdminRiskProfile        AdminRiskProfile[]

  @@index([category])
  @@index([dependencies])
}

model AdminBusinessTypeHazard {
  id                String            @id
  businessTypeId    String
  hazardId          String
  riskLevel         String
  frequency         String?
  impact            String?
  notes             String?
  isActive          Boolean           @default(true)
  createdAt         DateTime          @default(now())
  updatedAt         DateTime
  AdminBusinessType AdminBusinessType @relation(fields: [businessTypeId], references: [businessTypeId], onDelete: Cascade)
  AdminHazardType   AdminHazardType   @relation(fields: [hazardId], references: [hazardId], onDelete: Cascade)

  @@unique([businessTypeId, hazardId])
  @@index([businessTypeId])
  @@index([hazardId])
}

model AdminHazardActionPlan {
  id              String          @id
  hazardId        String
  actionPlanId    String
  businessTypes   String?
  isActive        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime
  AdminActionPlan AdminActionPlan @relation(fields: [actionPlanId], references: [id], onDelete: Cascade)
  AdminHazardType AdminHazardType @relation(fields: [hazardId], references: [hazardId], onDelete: Cascade)

  @@unique([hazardId, actionPlanId])
  @@index([hazardId])
}

model AdminHazardStrategy {
  id              String          @id
  hazardId        String
  strategyId      String
  businessTypes   String?
  priority        String          @default("medium")
  isRecommended   Boolean         @default(false)
  notes           String?
  isActive        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime
  AdminHazardType AdminHazardType @relation(fields: [hazardId], references: [hazardId], onDelete: Cascade)
  AdminStrategy   AdminStrategy   @relation(fields: [strategyId], references: [strategyId], onDelete: Cascade)

  @@unique([hazardId, strategyId])
  @@index([hazardId])
  @@index([strategyId])
}

model AdminHazardType {
  id                      String                    @id
  hazardId                String                    @unique
  // REMOVED: name, description - now in HazardTranslation
  category                String
  defaultFrequency        String
  defaultImpact           String
  seasonalPattern         String?
  peakMonths              String?
  warningTime             String?
  geographicScope         String?
  cascadingRisks          String?
  isActive                Boolean                   @default(true)
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime
  AdminActionPlan         AdminActionPlan?
  AdminBusinessTypeHazard AdminBusinessTypeHazard[]
  AdminHazardActionPlan   AdminHazardActionPlan[]
  AdminHazardStrategy     AdminHazardStrategy[]
  AdminLocationHazard     AdminLocationHazard[]
  HazardTranslation       HazardTranslation[]

  @@index([category])
  @@index([geographicScope])
  @@index([seasonalPattern])
}

model AdminLocation {
  id                  String                @id
  country             String
  countryCode         String
  parish              String?
  isCoastal           Boolean               @default(false)
  isUrban             Boolean               @default(false)
  isActive            Boolean               @default(true)
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  AdminLocationHazard AdminLocationHazard[]
  AdminRiskProfile    AdminRiskProfile[]

  @@unique([countryCode, parish])
  @@index([countryCode])
}

model AdminLocationHazard {
  id              String          @id
  locationId      String
  hazardId        String
  riskLevel       String
  frequency       String?
  impact          String?
  notes           String?
  isActive        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime
  AdminHazardType AdminHazardType @relation(fields: [hazardId], references: [hazardId], onDelete: Cascade)
  AdminLocation   AdminLocation   @relation(fields: [locationId], references: [id], onDelete: Cascade)

  @@unique([locationId, hazardId])
  @@index([hazardId])
  @@index([locationId])
}

model AdminRiskProfile {
  id                    String            @id
  createdAt             DateTime          @default(now())
  updatedAt             DateTime
  businessTypeId        String
  locationId            String
  calculatedRisks       String
  recommendedStrategies String
  lastCalculated        DateTime          @default(now())
  riskScore             Int
  AdminBusinessType     AdminBusinessType @relation(fields: [businessTypeId], references: [id])
  AdminLocation         AdminLocation     @relation(fields: [locationId], references: [id])

  @@unique([businessTypeId, locationId])
  @@index([businessTypeId])
  @@index([locationId])
}

model AdminStrategy {
  id                  String                @id
  strategyId          String                @unique
  title               String
  description         String
  category            String
  reasoning           String?
  icon                String?
  isActive            Boolean               @default(true)
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  AdminHazardStrategy AdminHazardStrategy[]

  @@index([category])
}

model AdminUnit {
  id            String         @id
  name          String
  localName     String?
  type          String         @default("parish")
  region        String?
  countryId     String
  population    Int            @default(0)
  area          Float?
  elevation     Float?
  coordinates   String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime
  isActive      Boolean        @default(true)
  Country       Country        @relation(fields: [countryId], references: [id], onDelete: Cascade)
  AdminUnitRisk AdminUnitRisk?

  @@unique([countryId, name])
  @@index([countryId])
  @@index([isActive])
  @@index([region])
  @@index([type])
}

model AdminUnitRisk {
  id                     String                   @id
  adminUnitId            String                   @unique
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime
  lastUpdated            DateTime                 @default(now())
  updatedBy              String                   @default("system")
  hurricaneLevel         Int                      @default(0)
  hurricaneNotes         String                   @default("")
  floodLevel             Int                      @default(0)
  floodNotes             String                   @default("")
  earthquakeLevel        Int                      @default(0)
  earthquakeNotes        String                   @default("")
  droughtLevel           Int                      @default(0)
  droughtNotes           String                   @default("")
  landslideLevel         Int                      @default(0)
  landslideNotes         String                   @default("")
  powerOutageLevel       Int                      @default(0)
  powerOutageNotes       String                   @default("")
  riskProfileJson        String                   @default("{}")
  isActive               Boolean                  @default(true)
  AdminUnit              AdminUnit                @relation(fields: [adminUnitId], references: [id], onDelete: Cascade)
  AdminUnitRiskChangeLog AdminUnitRiskChangeLog[]

  @@index([adminUnitId])
}

model AdminUnitRiskChangeLog {
  id              String        @id
  adminUnitRiskId String
  riskType        String
  oldLevel        Int
  newLevel        Int
  oldNotes        String        @default("")
  newNotes        String        @default("")
  changedBy       String
  changeReason    String?
  createdAt       DateTime      @default(now())
  AdminUnitRisk   AdminUnitRisk @relation(fields: [adminUnitRiskId], references: [id], onDelete: Cascade)

  @@index([adminUnitRiskId])
  @@index([createdAt])
  @@index([riskType])
}

model AnonymousSession {
  id                  String   @id
  sessionId           String   @unique
  businessName        String
  displayBusinessName String
  pin                 String
  email               String?
  planData            String
  shareableId         String?
  allowSharing        Boolean  @default(false)
  createdAt           DateTime @default(now())
  lastAccessed        DateTime @default(now())

  @@unique([businessName, pin])
  @@index([businessName])
  @@index([shareableId])
}

model BusinessContinuityPlan {
  id                  String               @id
  createdAt           DateTime             @default(now())
  updatedAt           DateTime
  ActionPlan          ActionPlan?
  BusinessOverview    BusinessOverview?
  ContactsInformation ContactsInformation?
  EssentialFunction   EssentialFunction?
  PlanInformation     PlanInformation?
  RiskAssessment      RiskAssessment?
  Strategy            Strategy?
  TestingMaintenance  TestingMaintenance?
}

model BusinessOverview {
  id                     String                 @id
  planId                 String                 @unique
  businessLicenseNumber  String
  businessPurpose        String
  productsAndServices    String
  serviceDeliveryMethods String
  operatingHours         String
  keyPersonnel           String
  minimumResources       String
  customerBase           String
  serviceProviderBCP     String
  BusinessContinuityPlan BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model BusinessProfile {
  id        String  @id
  sessionId String  @unique
  name      String
  industry  String
  size      String
  location  String
  Session   Session @relation(fields: [sessionId], references: [id])
}

model BusinessRiskProfile {
  id                    String       @id
  businessTypeId        String
  parishId              String
  combinedRisks         String
  recommendedStrategies String
  overallRiskScore      Int
  priorityActions       String?
  calculatedAt          DateTime     @default(now())
  calculatedBy          String?      @default("system")
  isActive              Boolean      @default(true)
  BusinessType          BusinessType @relation(fields: [businessTypeId], references: [id], onDelete: Cascade)
  Parish                Parish       @relation(fields: [parishId], references: [id], onDelete: Cascade)

  @@unique([businessTypeId, parishId])
  @@index([businessTypeId])
  @@index([parishId])
}

model BusinessRiskVulnerability {
  id                   String       @id
  businessTypeId       String
  riskType             String
  vulnerabilityLevel   Int          @default(5)
  impactSeverity       Int          @default(5)
  recoveryTime         String?      @default("medium")
  reasoning            String       @default("")
  mitigationDifficulty Int?         @default(3)
  costToRecover        String?      @default("medium")
  businessImpactAreas  String?
  criticalDependencies String?
  isActive             Boolean      @default(true)
  createdAt            DateTime     @default(now())
  updatedAt            DateTime
  BusinessType         BusinessType @relation(fields: [businessTypeId], references: [id], onDelete: Cascade)

  @@unique([businessTypeId, riskType])
  @@index([businessTypeId])
  @@index([riskType])
}

model BusinessType {
  id                        String                      @id
  businessTypeId            String                      @unique
  category                  String
  subcategory               String?
  isActive                  Boolean                     @default(true)
  createdAt                 DateTime                    @default(now())
  updatedAt                 DateTime
  digitalDependency         Int?                        @default(5)
  physicalAssetIntensity    Int?                        @default(5)
  regulatoryCompliance      Int?                        @default(5)
  seasonalityFactor         Int?                        @default(5)
  supplyChainComplexity     Int?                        @default(5)
  touristDependency         Int?                        @default(5)
  BusinessRiskProfile       BusinessRiskProfile[]
  BusinessRiskVulnerability BusinessRiskVulnerability[]
  BusinessTypeStrategy      BusinessTypeStrategy[]
  BusinessTypeTranslation   BusinessTypeTranslation[]

  @@index([businessTypeId])
  @@index([category])
}

model BusinessTypeStrategy {
  id                     String                 @id
  businessTypeId         String
  strategyId             String
  relevanceScore         Int?                   @default(7)
  customNotes            String?
  isRecommended          Boolean?               @default(true)
  priority               String?                @default("medium")
  createdAt              DateTime               @default(now())
  updatedAt              DateTime
  BusinessType           BusinessType           @relation(fields: [businessTypeId], references: [id], onDelete: Cascade)
  RiskMitigationStrategy RiskMitigationStrategy @relation(fields: [strategyId], references: [id], onDelete: Cascade)

  @@unique([businessTypeId, strategyId])
}

model BusinessTypeTranslation {
  id                      String       @id
  businessTypeId          String
  locale                  String
  name                    String
  description             String?
  exampleBusinessPurposes Json?
  exampleProducts         Json?
  exampleKeyPersonnel     Json?
  exampleCustomerBase     Json?
  minimumEquipment        Json?
  createdAt               DateTime     @default(now())
  updatedAt               DateTime
  BusinessType            BusinessType @relation(fields: [businessTypeId], references: [id], onDelete: Cascade)

  @@unique([businessTypeId, locale])
  @@index([businessTypeId])
  @@index([locale])
}

model ContactsInformation {
  id                         String                 @id
  planId                     String                 @unique
  staffContactInfo           String
  keyCustomerContacts        String
  supplierInformation        String
  emergencyServicesUtilities String
  criticalBusinessInfo       String
  planDistributionList       String
  BusinessContinuityPlan     BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model CostItem {
  id                   String               @id
  itemId               String               @unique
  name                 String
  description          String?
  category             String
  baseUSD              Float
  baseUSDMin           Float?
  baseUSDMax           Float?
  unit                 String?
  complexity           String               @default("medium")
  notes                String?
  tags                 String?
  budgetAlternativeId  String?
  premiumAlternativeId String?
  isActive             Boolean              @default(true)
  createdAt            DateTime             @default(now())
  updatedAt            DateTime
  ActionStepItemCost   ActionStepItemCost[]
  StrategyItemCost     StrategyItemCost[]

  @@index([category])
  @@index([itemId])
}

model Country {
  id        String      @id
  name      String
  code      String      @unique
  region    String?
  isActive  Boolean     @default(true)
  createdAt DateTime    @default(now())
  updatedAt DateTime
  AdminUnit AdminUnit[]

  @@index([code])
  @@index([isActive])
}

model CountryCostMultiplier {
  id              String   @id
  countryCode     String   @unique
  construction    Float    @default(1.0)
  equipment       Float    @default(1.0)
  service         Float    @default(1.0)
  supplies        Float    @default(1.0)
  currency        String
  currencySymbol  String?
  exchangeRateUSD Float
  lastUpdated     DateTime @default(now())
  updatedBy       String?
  dataSource      String?
  confidenceLevel String   @default("medium")
  notes           String?

  @@index([countryCode])
}

model EssentialFunction {
  id                       String                 @id
  planId                   String                 @unique
  supplyChainManagement    String
  staffManagement          String
  technology               String
  productsServices         String
  infrastructureFacilities String
  sales                    String
  administration           String
  BusinessContinuityPlan   BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model HazardTranslation {
  id              String          @id
  hazardId        String
  locale          String
  name            String
  description     String?
  impact          String?
  createdAt       DateTime        @default(now())
  updatedAt       DateTime
  AdminHazardType AdminHazardType @relation(fields: [hazardId], references: [id], onDelete: Cascade)

  @@unique([hazardId, locale])
  @@index([hazardId])
  @@index([locale])
}

model Parish {
  id                  String                @id
  name                String
  region              String
  countryCode         String                @default("JM")
  population          Int                   @default(0)
  area                Float?
  elevation           Float?
  coordinates         String?
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  isActive            Boolean               @default(true)
  BusinessRiskProfile BusinessRiskProfile[]
  ParishRisk          ParishRisk?

  @@index([countryCode])
  @@index([region])
}

model ParishRisk {
  id               String          @id
  parishId         String          @unique
  createdAt        DateTime        @default(now())
  updatedAt        DateTime
  lastUpdated      DateTime        @default(now())
  updatedBy        String          @default("system")
  hurricaneLevel   Int             @default(0)
  hurricaneNotes   String          @default("")
  floodLevel       Int             @default(0)
  floodNotes       String          @default("")
  earthquakeLevel  Int             @default(0)
  earthquakeNotes  String          @default("")
  droughtLevel     Int             @default(0)
  droughtNotes     String          @default("")
  landslideLevel   Int             @default(0)
  landslideNotes   String          @default("")
  powerOutageLevel Int             @default(0)
  powerOutageNotes String          @default("")
  riskProfileJson  String          @default("{}")
  isActive         Boolean         @default(true)
  Parish           Parish          @relation(fields: [parishId], references: [id], onDelete: Cascade)
  RiskChangeLog    RiskChangeLog[]

  @@index([parishId])
}

model PlanInformation {
  id                     String                 @id
  planId                 String                 @unique
  companyName            String
  planManager            String
  alternateManager       String?
  physicalPlanLocation   String
  digitalPlanLocation    String?
  BusinessContinuityPlan BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model RiskAssessment {
  id                     String                 @id
  planId                 String                 @unique
  potentialHazards       String
  hazards                String
  BusinessContinuityPlan BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model RiskChangeLog {
  id           String     @id
  parishRiskId String
  riskType     String
  oldLevel     Int
  newLevel     Int
  oldNotes     String     @default("")
  newNotes     String     @default("")
  changedBy    String
  changeReason String?
  createdAt    DateTime   @default(now())
  ParishRisk   ParishRisk @relation(fields: [parishRiskId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([parishRiskId])
  @@index([riskType])
}

model RiskMitigationStrategy {
  id                      String                 @id
  strategyId              String                 @unique
  selectionTier           String?                @default("recommended")
  isActive                Boolean                @default(true)
  createdAt               DateTime               @default(now())
  updatedAt               DateTime
  bcpSectionMapping       String?
  businessContinuityPhase String?
  businessSizeGuidance    Json?
  complexityLevel         String?                @default("moderate")
  costEstimateJMD         String?
  defaultSelected         Boolean                @default(false)
  difficultyLevel         String?                @default("medium")
  effectiveness           Int                    @default(70)
  estimatedDIYSavings     String?
  estimatedTotalHours     Int?
  implementationCost      String                 @default("medium")
  implementationTime      String                 @default("medium")
  industryVariants        Json?
  prerequisites           Json?
  priority                String                 @default("medium")
  quickWinIndicator       Boolean                @default(false)
  applicableRisks         Json?
  applicableBusinessTypes Json?
  ActionStep              ActionStep[]
  BusinessTypeStrategy    BusinessTypeStrategy[]
  StrategyItemCost        StrategyItemCost[]
  StrategyTranslation     StrategyTranslation[]

  @@index([selectionTier])
  @@index([strategyId])
}

model RiskMultiplier {
  id                        String                      @id
  // REMOVED: name, description, reasoning - now in RiskMultiplierTranslation
  characteristicType        String
  conditionType             String
  thresholdValue            Float?
  minValue                  Float?
  maxValue                  Float?
  multiplierFactor          Float
  applicableHazards         String
  isActive                  Boolean                     @default(true)
  priority                  Int                         @default(0)
  createdAt                 DateTime                    @default(now())
  updatedAt                 DateTime
  createdBy                 String                      @default("system")
  RiskMultiplierTranslation RiskMultiplierTranslation[]

  @@index([characteristicType])
  @@index([isActive])
  @@index([priority])
}

model RiskMultiplierTranslation {
  id                  String         @id
  riskMultiplierId    String
  locale              String
  name                String
  description         String?
  reasoning           String?
  wizardQuestion      String?
  wizardHelpText      String?
  wizardAnswerOptions Json?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime
  RiskMultiplier      RiskMultiplier @relation(fields: [riskMultiplierId], references: [id], onDelete: Cascade)

  @@unique([riskMultiplierId, locale])
  @@index([locale])
  @@index([riskMultiplierId])
}

model Session {
  id              String           @id
  createdAt       DateTime         @default(now())
  updatedAt       DateTime
  currentStep     String
  stepData        String
  BusinessProfile BusinessProfile?
}

model Strategy {
  id                     String                 @id
  planId                 String                 @unique
  preventionStrategies   String
  responseStrategies     String
  recoveryStrategies     String
  longTermRiskReduction  String
  BusinessContinuityPlan BusinessContinuityPlan @relation(fields: [planId], references: [id])
}

model StrategyItemCost {
  id                     String                 @id
  strategyId             String
  itemId                 String
  quantity               Int                    @default(1)
  customNotes            String?
  countryOverrides       String?
  isRequired             Boolean                @default(true)
  displayOrder           Int                    @default(0)
  createdAt              DateTime               @default(now())
  updatedAt              DateTime
  CostItem               CostItem               @relation(fields: [itemId], references: [itemId], onDelete: Cascade)
  RiskMitigationStrategy RiskMitigationStrategy @relation(fields: [strategyId], references: [id], onDelete: Cascade)

  @@unique([strategyId, itemId])
  @@index([itemId])
  @@index([strategyId])
}

model StrategyTranslation {
  id                     String                 @id
  strategyId             String
  locale                 String
  name                   String
  description            String
  smeTitle               String?
  smeSummary             String?
  realWorldExample       String?
  whyImportant           String?
  whenToImplement        String?
  expectedOutcome        String?
  benefitsBullets        Json?
  helpfulTips            Json?
  commonMistakes         Json?
  successMetrics         Json?
  requiredResources      Json?
  lowBudgetAlternative   String?
  diyApproach            String?
  bcpTemplateText        String?
  createdAt              DateTime               @default(now())
  updatedAt              DateTime
  RiskMitigationStrategy RiskMitigationStrategy @relation(fields: [strategyId], references: [id], onDelete: Cascade)

  @@unique([strategyId, locale])
  @@index([locale])
  @@index([strategyId])
}

model TestingMaintenance {
  id                      String                 @id
  planId                  String                 @unique
  planTestingSchedule     String
  planRevisionHistory     String
  improvementTracking     String
  annualReviewProcess     String
  triggerEventsForUpdates String
  BusinessContinuityPlan  BusinessContinuityPlan @relation(fields: [planId], references: [id])
}
